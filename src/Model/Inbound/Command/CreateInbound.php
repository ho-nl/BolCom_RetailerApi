<?php

// this file is auto-generated by prolic/fpp
// don't edit this file manually

declare(strict_types=1);

namespace BolCom\RetailerApi\Model\Inbound\Command;

final class CreateInbound extends \Prooph\Common\Messaging\Command
{
    use \Prooph\Common\Messaging\PayloadTrait;

    public const MESSAGE_NAME = 'BolCom\RetailerApi\Model\Inbound\Command\CreateInbound';

    protected $messageName = self::MESSAGE_NAME;

    public function reference(): ?\BolCom\RetailerApi\Model\Inbound\Reference
    {
        return isset($this->payload['reference']) ? \BolCom\RetailerApi\Model\Inbound\Reference::fromString($this->payload['reference']) : null;
    }

    public function timeslot(): \BolCom\RetailerApi\Model\Inbound\Timeslot
    {
        return \BolCom\RetailerApi\Model\Inbound\Timeslot::fromArray($this->payload['timeslot']);
    }

    public function fbbTransporter(): \BolCom\RetailerApi\Model\Inbound\Transporter
    {
        return \BolCom\RetailerApi\Model\Inbound\Transporter::fromArray($this->payload['fbbTransporter']);
    }

    public function labellingService(): bool
    {
        return $this->payload['labellingService'];
    }

    /**
     * @return \BolCom\RetailerApi\Model\Inbound\Product[]
     */
    public function products(): array
    {
        $__returnValue = [];

        foreach ($this->payload['products'] as $__value) {
            $__returnValue[] = \BolCom\RetailerApi\Model\Inbound\Product::fromArray($__value);
        }

        return $__returnValue;
    }

        /**
     * @param \BolCom\RetailerApi\Model\Inbound\Reference $reference
     * @param \BolCom\RetailerApi\Model\Inbound\Timeslot $timeslot
     * @param \BolCom\RetailerApi\Model\Inbound\Transporter $fbbTransporter
     * @param bool $labellingService
     * @param \BolCom\RetailerApi\Model\Inbound\Product[]|null $products
     */
public static function with(?\BolCom\RetailerApi\Model\Inbound\Reference $reference, \BolCom\RetailerApi\Model\Inbound\Timeslot $timeslot, \BolCom\RetailerApi\Model\Inbound\Transporter $fbbTransporter, bool $labellingService, array $products): CreateInbound
    {
        return new self([
            'reference' => null === $reference ? null : $reference->toString(),
            'timeslot' => $timeslot,
            'fbbTransporter' => $fbbTransporter,
            'labellingService' => $labellingService,
            'products' => $products,
        ]);
    }

    protected function setPayload(array $payload): void
    {
        if (isset($payload['reference']) && ! \is_string($payload['reference'])) {
            throw new \InvalidArgumentException("Value for 'reference' is not a string in payload");
        }

        if (! isset($payload['timeslot'])) {
            throw new \InvalidArgumentException("Key 'timeslot' is missing in payload");
        }

        if (! isset($payload['fbbTransporter'])) {
            throw new \InvalidArgumentException("Key 'fbbTransporter' is missing in payload");
        }

        if (! isset($payload['labellingService']) || ! \is_bool($payload['labellingService'])) {
            throw new \InvalidArgumentException("Key 'labellingService' is missing in payload or is not a bool");
        }

        if (! isset($payload['products'])) {
            throw new \InvalidArgumentException("Key 'products' is missing in payload");
        }

        $this->payload = $payload;
    }
}
